@import "tailwindcss";
@import "@fontsource/geist/index.css";
@import "@fontsource/geist-mono/index.css";

:root {
  /* Core palette */
  --linen: 237 239 237; /* #EDEFED */
  --space-cadet: 43 45 66; /* legacy token */
  --cool-gray: 131 129 150; /* legacy token */
  --night: 0 9 0; /* #04170B */
  --smoky: 10 13 6;
  --sandy-brown: 244 175 66;
  /* Overlay color for mobile menu (light mode) */
  --overlay: 46 239 114; /* #2EEF72 */

  /* Paper texture tokens */
  --texture-paper-img: url("/textures/bkg-noise.webp");
  --texture-paper-size: 200px 200px;
  --texture-paper-mixBlendMode: normal;
  --texture-paper-opacity: 0.9;

  /* Light theme */
  --background: var(--linen);
  --foreground: var(--night);
  --background-alt: var(--linen);
}

.dark {
  /* Dark theme */
  --background: var(--night);
  --foreground: var(--linen);
  --background-alt: var(--smoky);
  /* Match overlay to theme background in dark mode */
  --overlay: var(--background);
  --texture-paper-opacity: 0.04;
}

.vibe {
  /* Vibe theme */
  --background: 27 143 68; /* #1B8F44 */
  --foreground: var(--linen);
  --background-alt: 22 65 38; /* #164126 */
  --overlay: var(--background);
  --texture-paper-opacity: 0.12;
}

@theme inline {
  --color-background: rgb(var(--background));
  --color-foreground: rgb(var(--foreground));
  --color-background-alt: rgb(var(--background-alt));
  /* Expose full palette as tokens */
  --color-linen: rgb(var(--linen));
  --color-space-cadet: rgb(var(--space-cadet));
  --color-cool-gray: rgb(var(--cool-gray));
  --color-night: rgb(var(--night));
  --color-smoky: rgb(var(--smoky));
  --color-sandy-brown: rgb(var(--sandy-brown));
  --font-sans: "Geist", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
    Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --font-mono: "Geist Mono", ui-monospace, SFMono-Regular, Menlo, Monaco,
    Consolas, "Liberation Mono", "Courier New", monospace;
  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
}

body {
  background-color: rgb(var(--background));
  color: rgb(var(--foreground));
  font-family: var(--font-sans);
  position: relative;
  min-height: 100vh;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  background-image: var(--texture-paper-img);
  background-repeat: repeat;
  background-size: var(--texture-paper-size);
  mix-blend-mode: var(--texture-paper-mixBlendMode);
  opacity: var(--texture-paper-opacity);
  pointer-events: none;
}

/* Ensure links inherit theme foreground color in both light and dark modes */
a,
a:visited {
  color: inherit;
}

/* Wrap long content and code blocks inside article bodies */
.prose-wrapper {
  overflow-wrap: anywhere;
  word-wrap: break-word;
}

.prose-wrapper pre,
.prose-wrapper code {
  white-space: pre-wrap;
  word-break: break-word;
}

/* Vertical dashed separators for courses grid at md and lg breakpoints */
.courses-grid::before,
.courses-grid::after {
  content: "";
  position: absolute;
  top: 24px; /* inset from top horizontal */
  bottom: 24px; /* inset from bottom horizontal */
  width: 0;
  border-right: 1px dashed rgba(0, 0, 0, 0.12);
}

@media (prefers-color-scheme: dark) {
  .courses-grid::before,
  .courses-grid::after {
    border-right-color: rgba(255, 255, 255, 0.16);
  }
}

/* Masks create vertical spacing at top and bottom of each square,
   while a single dashed border is applied per row via nth-child rules below. */
.courses-item {
  padding-top: 1.25rem; /* 20px */
  padding-bottom: 1.25rem;
}

.courses-item::before,
.courses-item::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 24px; /* vertical spacing at top/bottom so vertical lines don't touch */
  background: rgb(var(--background));
}

.courses-item::before {
  top: 0;
}
.courses-item::after {
  bottom: 0;
}

@media (prefers-color-scheme: dark) {
  .courses-item::before,
  .courses-item::after {
    background: rgb(var(--background));
  }
}

/* Single dashed horizontal rule between rows per breakpoint */
/* mobile: 1 col -> rule above every item after the first */
@media (max-width: 767.98px) {
  .courses-grid > .courses-item:nth-child(n + 2) {
    border-top: 1px dashed rgba(0, 0, 0, 0.12);
  }
  .dark .courses-grid > .courses-item:nth-child(n + 2) {
    border-top-color: rgba(255, 255, 255, 0.16);
  }
}

/* md: 2 cols -> rule above every item from the 3rd onward */
@media (min-width: 768px) and (max-width: 1023.98px) {
  .courses-grid > .courses-item:nth-child(n + 3) {
    border-top: 1px dashed rgba(0, 0, 0, 0.12);
  }
  .dark .courses-grid > .courses-item:nth-child(n + 3) {
    border-top-color: rgba(255, 255, 255, 0.16);
  }
}

/* lg: 3 cols -> rule above every item from the 4th onward */
@media (min-width: 1024px) {
  .courses-grid > .courses-item:nth-child(n + 4) {
    border-top: 1px dashed rgba(0, 0, 0, 0.12);
  }
  .dark .courses-grid > .courses-item:nth-child(n + 4) {
    border-top-color: rgba(255, 255, 255, 0.16);
  }
}

@media (min-width: 768px) {
  /* md: 2 columns → one vertical divider between them */
  .courses-grid::before {
    left: 50%;
    transform: translateX(-0.5px);
    display: block;
  }
  .courses-grid::after {
    display: none;
  }
}

@media (min-width: 1024px) {
  /* lg: 3 columns → two vertical dividers at 1/3 and 2/3 */
  .courses-grid::before {
    left: 33.3333%;
    transform: translateX(-0.5px);
    display: block;
  }
  .courses-grid::after {
    left: 66.6666%;
    transform: translateX(-0.5px);
    display: block;
  }
}

.spec-content h1,
.spec-content h2,
.spec-content h3,
.spec-content h4,
.spec-content h5,
.spec-content h6 {
  font-family: var(--font-mono);
  font-weight: 700;
  color: rgb(var(--foreground));
}

.spec-content h6 {
  letter-spacing: 0.08em;
  text-transform: uppercase;
}
